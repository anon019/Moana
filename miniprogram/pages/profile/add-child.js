"use strict";const e=require("../../common/vendor.js"),t=require("../../stores/child.js"),a=e.defineComponent({__name:"add-child",setup(a){const n=t.useChildStore(),i=e.reactive({name:"",gender:"",birthDate:"",interests:[]}),l=e.ref(!1),o=[{value:"animals",label:"åŠ¨ç‰©",icon:"ðŸ»"},{value:"vehicles",label:"äº¤é€šå·¥å…·",icon:"ðŸš—"},{value:"space",label:"å¤ªç©º",icon:"ðŸš€"},{value:"princess",label:"å…¬ä¸»",icon:"ðŸ‘¸"},{value:"dinosaur",label:"æé¾™",icon:"ðŸ¦•"},{value:"ocean",label:"æµ·æ´‹",icon:"ðŸ³"},{value:"music",label:"éŸ³ä¹",icon:"ðŸŽµ"},{value:"sports",label:"è¿åŠ¨",icon:"âš½"}],r=new Date,s=r.toISOString().split("T")[0],u=`${r.getFullYear()-6}-01-01`,c=e.computed(()=>{if(!i.birthDate)return"";const e=new Date(i.birthDate),t=new Date,a=12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth());if(a<0)return"";const n=Math.floor(a/12),l=a%12;return 0===n?`${l}ä¸ªæœˆ`:0===l?`${n}å²`:`${n}å²${l}ä¸ªæœˆ`}),d=e.computed(()=>i.name.trim()&&i.birthDate&&!l.value);function v(e){i.birthDate=e.detail.value}async function h(){if(d.value){l.value=!0;try{await n.addChild({name:i.name.trim(),birth_date:i.birthDate,interests:i.interests.length>0?i.interests:void 0}),e.index.showToast({title:"æ·»åŠ æˆåŠŸ",icon:"success"}),setTimeout(()=>{e.index.navigateBack()},1500)}catch(t){const a="string"==typeof t?t:(null==t?void 0:t.message)||(null==t?void 0:t.detail)||"æ·»åŠ å¤±è´¥";console.error("æ·»åŠ å®è´å¤±è´¥:",t),e.index.showToast({title:a,icon:"none"})}finally{l.value=!1}}}return(t,a)=>e.e({a:i.name,b:e.o(e=>i.name=e.detail.value),c:"male"===i.gender?1:"",d:e.o(e=>i.gender="male"),e:"female"===i.gender?1:"",f:e.o(e=>i.gender="female"),g:i.birthDate},i.birthDate?{h:e.t(i.birthDate)}:{},{i:i.birthDate,j:u,k:e.unref(s),l:e.o(v),m:c.value},c.value?{n:e.t(c.value)}:{},{o:e.f(o,(t,a,n)=>({a:e.t(t.icon),b:e.t(t.label),c:t.value,d:i.interests.includes(t.value)?1:"",e:e.o(a=>function(t){const a=i.interests.indexOf(t);a>-1?i.interests.splice(a,1):i.interests.length<5?i.interests.push(t):e.index.showToast({title:"æœ€å¤šé€‰æ‹©5ä¸ªå…´è¶£",icon:"none"})}(t.value),t.value)})),p:e.t(l.value?"æ·»åŠ ä¸­...":"æ·»åŠ å®è´"),q:d.value?"":1,r:e.o(h)})}}),n=e._export_sfc(a,[["__scopeId","data-v-c7191dfd"]]);wx.createPage(n);
