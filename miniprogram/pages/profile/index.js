"use strict";const e=require("../../common/vendor.js"),n=require("../../stores/user.js"),r=require("../../stores/child.js"),i=e.defineComponent({__name:"index",setup(i){const t=n.useUserStore(),u=r.useChildStore();function o(e){if(!e)return"未知";const n=new Date(e),r=new Date,i=12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth());if(i<=0)return"刚出生";const t=Math.floor(i/12),u=i%12;return 0===t?`${u}个月`:0===u?`${t}岁`:`${t}岁${u}个月`}function d(){e.index.navigateTo({url:"/pages/profile/add-child"})}function l(){e.index.navigateTo({url:"/pages/settings/index"})}function a(){e.index.navigateTo({url:"/pages/report/index"})}function s(){e.index.navigateTo({url:"/pages/favorites/index"})}function c(){e.index.navigateTo({url:"/pages/feedback/index"})}function f(){e.index.showModal({title:"关于 Moana",content:"Moana 是一款 AI 原生的早教内容生成平台，为 1-6 岁儿童提供个性化绘本、儿歌和视频内容。\n\n版本：1.0.0",showCancel:!1,confirmText:"好的"})}function h(){e.index.showModal({title:"退出登录",content:"确定要退出登录吗？",success:n=>{n.confirm&&(t.logout(),e.index.reLaunch({url:"/pages/index/index"}))}})}return e.onShow(()=>{t.checkLogin()&&!t.user&&t.fetchUser(),u.fetchChildren()}),(n,r)=>{var i,g,v,x,p,m;return e.e({a:null==(i=e.unref(t).user)?void 0:i.avatar_url},(null==(g=e.unref(t).user)?void 0:g.avatar_url)?{b:e.unref(t).user.avatar_url}:{c:e.t(((null==(v=e.unref(t).user)?void 0:v.nickname)||"用")[0])},{d:e.t((null==(x=e.unref(t).user)?void 0:x.nickname)||"未登录"),e:e.t((null==(m=null==(p=e.unref(t).user)?void 0:p.id)?void 0:m.slice(0,8))||"--------"),f:e.o(d),g:0===e.unref(u).children.length},0===e.unref(u).children.length?{h:e.o(d)}:{i:e.f(e.unref(u).children,(n,r,i)=>{var t,d,l,a,s;return e.e({a:(null==(t=e.unref(u).currentChild)?void 0:t.id)===n.id},(null==(d=e.unref(u).currentChild)||d.id,n.id,{}),{b:e.t(n.name),c:e.t(o(n.birth_date)),d:(null==(l=e.unref(u).currentChild)?void 0:l.id)===n.id},(null==(a=e.unref(u).currentChild)||a.id,n.id,{}),{e:n.id,f:(null==(s=e.unref(u).currentChild)?void 0:s.id)===n.id?1:"",g:e.o(r=>function(n){u.setCurrentChild(n),e.index.showToast({title:`已切换到 ${n.name}`,icon:"success"})}(n),n.id)})})},{j:e.o(l),k:e.o(a),l:e.o(s),m:e.o(c),n:e.o(f),o:e.o(h)})}}}),t=e._export_sfc(i,[["__scopeId","data-v-d357a40d"]]);wx.createPage(t);
