<view class="page-container data-v-56980893"><view class="decor-bg data-v-56980893"><view class="decor-shape shape-1 data-v-56980893"></view><view class="decor-shape shape-2 data-v-56980893"></view><view class="decor-shape shape-3 data-v-56980893"></view></view><view class="nav-bar data-v-56980893" style="{{'padding-top:' + b}}"><view class="nav-content data-v-56980893"><view class="back-btn data-v-56980893" bindtap="{{a}}"><text class="data-v-56980893">‹</text></view><text class="nav-title data-v-56980893">创作视频</text><view class="nav-right data-v-56980893"></view></view></view><view class="nav-placeholder data-v-56980893" style="{{'height:' + c}}"></view><scroll-view wx:if="{{d}}" class="main-scroll data-v-56980893" scroll-y><creation-mode-selector wx:if="{{f}}" class="data-v-56980893" bindselect="{{e}}" u-i="56980893-0" bind:__l="__l" u-p="{{f}}"/></scroll-view><scroll-view wx:else class="main-scroll data-v-56980893" scroll-y><view class="mode-tabs data-v-56980893"><view class="{{['mode-tab', 'data-v-56980893', g && 'active']}}" bindtap="{{h}}"><text class="tab-icon data-v-56980893">📚</text><text class="tab-text data-v-56980893">基于绘本</text></view><view class="{{['mode-tab', 'data-v-56980893', i && 'active']}}" bindtap="{{j}}"><text class="tab-icon data-v-56980893">✨</text><text class="tab-text data-v-56980893">独立创作</text></view></view><view wx:if="{{k}}" class="step-indicator data-v-56980893"><view class="{{['step', 'data-v-56980893', 'active', m && 'completed']}}"><view class="step-dot data-v-56980893">{{l}}</view><text class="step-text data-v-56980893">选择绘本</text></view><view class="{{['step-line', 'data-v-56980893', n && 'active']}}"></view><view class="{{['step', 'data-v-56980893', p && 'active', q && 'completed']}}"><view class="step-dot data-v-56980893">{{o}}</view><text class="step-text data-v-56980893">选择画面</text></view><view class="{{['step-line', 'data-v-56980893', r && 'active']}}"></view><view class="{{['step', 'data-v-56980893', s && 'active']}}"><view class="step-dot data-v-56980893">3</view><text class="step-text data-v-56980893">生成视频</text></view></view><view wx:else class="step-indicator data-v-56980893"><view class="{{['step', 'data-v-56980893', 'active', v && 'completed']}}"><view class="step-dot data-v-56980893">{{t}}</view><text class="step-text data-v-56980893">描述场景</text></view><view class="{{['step-line', 'data-v-56980893', w && 'active']}}"></view><view class="{{['step', 'data-v-56980893', x && 'active']}}"><view class="step-dot data-v-56980893">2</view><text class="step-text data-v-56980893">配置生成</text></view></view><view class="section data-v-56980893" hidden="{{!C}}"><text class="section-title data-v-56980893">选择要转换的绘本</text><text class="section-desc data-v-56980893">将绘本故事转化为精彩动画视频</text><view wx:if="{{y}}" class="loading-state data-v-56980893"><text class="loading-icon animate-spin data-v-56980893">🔄</text><text class="data-v-56980893">加载中...</text></view><view wx:elif="{{z}}" class="empty-state data-v-56980893"><text class="empty-icon data-v-56980893">📚</text><text class="empty-title data-v-56980893">暂无绘本</text><text class="empty-desc data-v-56980893">请先创作一本绘本，再来生成视频</text><view class="empty-action data-v-56980893" bindtap="{{A}}"><text class="data-v-56980893">去创作绘本</text></view></view><view wx:else class="book-list data-v-56980893"><view wx:for="{{B}}" wx:for-item="book" wx:key="j" class="{{['book-card', 'data-v-56980893', book.k && 'selected']}}" bindtap="{{book.l}}"><view class="book-cover data-v-56980893"><image wx:if="{{book.a}}" src="{{book.b}}" mode="aspectFill" class="cover-image data-v-56980893"/><view wx:else class="cover-placeholder data-v-56980893"><text class="data-v-56980893">📖</text></view><view wx:if="{{book.c}}" class="selected-badge data-v-56980893"><text class="data-v-56980893">✓</text></view></view><view class="book-info data-v-56980893"><text class="book-title data-v-56980893">{{book.d}}</text><text class="book-meta data-v-56980893"><text wx:if="{{book.e}}" class="data-v-56980893">加载中...</text><text wx:elif="{{book.f}}" class="data-v-56980893">{{book.g}} 页</text><text wx:elif="{{book.h}}" class="data-v-56980893">获取详情中...</text><text wx:else class="data-v-56980893">{{book.i}}</text></text></view></view></view></view><view class="section data-v-56980893" hidden="{{!M}}"><text class="section-title data-v-56980893">描述你想要的视频</text><text class="section-desc data-v-56980893">AI 将根据描述生成专属动画视频</text><view class="standalone-input-area data-v-56980893"><view class="input-container data-v-56980893"><block wx:if="{{r0}}"><textarea class="prompt-input data-v-56980893" placeholder="例如：小兔子在花园里开心地吃蔬菜，旁边有蝴蝶飞舞..." maxlength="{{500}}" auto-height value="{{D}}" bindinput="{{E}}"/></block><view class="input-footer data-v-56980893"><text class="char-count data-v-56980893">{{F}}/500</text></view></view><view wx:if="{{G}}" class="first-frame-preview data-v-56980893"><text class="preview-label data-v-56980893">首帧预览</text><image src="{{H}}" mode="aspectFit" class="preview-image data-v-56980893"/><view class="preview-actions data-v-56980893"><view class="regenerate-btn data-v-56980893" bindtap="{{I}}"><text class="data-v-56980893">🔄 重新生成</text></view></view></view><view wx:else class="{{['generate-first-frame-btn', 'data-v-56980893', K && 'disabled']}}" bindtap="{{L}}"><text wx:if="{{J}}" class="data-v-56980893">🔄 生成中...</text><text wx:else class="data-v-56980893">✨ 预览首帧（可选）</text></view><text class="first-frame-hint data-v-56980893">生成首帧可以预览效果，跳过则由 AI 自动生成</text></view></view><view class="section data-v-56980893" hidden="{{!R}}"><text class="section-title data-v-56980893">选择视频首帧画面</text><text class="section-desc data-v-56980893">选择一张绘本图片作为视频的起始画面</text><view class="page-selector data-v-56980893"><view wx:for="{{N}}" wx:for-item="page" wx:key="e" class="{{['page-thumb', 'data-v-56980893', page.f && 'is-first-frame', page.g && 'is-reference']}}" bindtap="{{page.h}}"><image src="{{page.a}}" mode="aspectFill" class="thumb-image data-v-56980893"/><view wx:if="{{page.b}}" class="thumb-badge first-frame data-v-56980893"><text class="data-v-56980893">首帧</text></view><view wx:elif="{{page.c}}" class="thumb-badge reference data-v-56980893"><text class="data-v-56980893">参考</text></view><text class="thumb-num data-v-56980893">{{page.d}}</text></view></view><view wx:if="{{O}}" class="reference-section data-v-56980893"><view class="reference-header data-v-56980893"><text class="reference-title data-v-56980893">角色参考图</text><text class="reference-hint data-v-56980893">可选，最多再选 {{P}} 张</text></view><text class="reference-desc data-v-56980893">选择其他页面作为角色参考，帮助保持角色一致性</text><view class="reference-list data-v-56980893"><view wx:for="{{Q}}" wx:for-item="page" wx:key="c" class="{{['reference-thumb', 'data-v-56980893', page.d && 'selected']}}" bindtap="{{page.e}}"><image src="{{page.a}}" mode="aspectFill" class="thumb-image data-v-56980893"/><view wx:if="{{page.b}}" class="ref-check data-v-56980893"><text class="data-v-56980893">✓</text></view></view></view></view></view><view class="section data-v-56980893" hidden="{{!am}}"><view class="preview-card data-v-56980893"><view class="preview-header data-v-56980893"><image wx:if="{{S}}" src="{{T}}" mode="aspectFill" class="preview-image data-v-56980893"/><view class="preview-info data-v-56980893"><text class="preview-title data-v-56980893">{{U}}</text><text class="preview-meta data-v-56980893">首帧: 第 {{V}} 页</text><text wx:if="{{W}}" class="preview-meta data-v-56980893"> 参考图: {{X}} 张 </text></view></view></view><view class="style-section data-v-56980893"><text class="style-title data-v-56980893"><text class="title-icon data-v-56980893">🎬</text> 场景模板 </text><text class="style-hint data-v-56980893">选择模板自动应用最佳参数，也可手动调整</text><view class="template-list data-v-56980893"><view wx:for="{{Y}}" wx:for-item="template" wx:key="f" class="{{['template-card', 'data-v-56980893', template.g && 'active', template.h && 'recommended']}}" bindtap="{{template.i}}"><view wx:if="{{template.a}}" class="recommend-badge data-v-56980893">推荐</view><text class="template-icon data-v-56980893">{{template.b}}</text><text class="template-name data-v-56980893">{{template.c}}</text><text class="template-desc data-v-56980893">{{template.d}}</text><view wx:if="{{template.e}}" class="template-check data-v-56980893"><text class="data-v-56980893">✓</text></view></view></view></view><view class="style-section data-v-56980893"><text class="style-title data-v-56980893"><text class="title-icon data-v-56980893">📐</text> 画面比例 </text><view class="aspect-ratio-list data-v-56980893"><view wx:for="{{Z}}" wx:for-item="ratio" wx:key="d" class="{{['aspect-ratio-item', 'data-v-56980893', ratio.e && 'active']}}" bindtap="{{ratio.f}}"><view class="ratio-preview data-v-56980893" style="{{'aspect-ratio:' + ratio.a}}"></view><text class="ratio-label data-v-56980893">{{ratio.b}}</text><text wx:if="{{ratio.c}}" class="ratio-badge data-v-56980893">推荐</text></view></view></view><view class="style-section data-v-56980893"><text class="style-title data-v-56980893"><text class="title-icon data-v-56980893">🎭</text> 运动模式 </text><view class="motion-mode-list data-v-56980893"><view wx:for="{{aa}}" wx:for-item="mode" wx:key="e" class="{{['motion-mode-item', 'data-v-56980893', mode.f && 'active']}}" bindtap="{{mode.g}}"><view class="mode-info data-v-56980893"><text class="mode-name data-v-56980893">{{mode.a}}</text><text class="mode-desc data-v-56980893">{{mode.b}}</text></view><view wx:if="{{mode.c}}" class="mode-badge data-v-56980893">推荐</view><view wx:if="{{mode.d}}" class="mode-check data-v-56980893"><text class="data-v-56980893">✓</text></view></view></view></view><view class="style-section data-v-56980893"><text class="style-title data-v-56980893"><text class="title-icon data-v-56980893">🎞️</text> 视频分辨率 </text><view class="resolution-tabs data-v-56980893"><view wx:for="{{ab}}" wx:for-item="res" wx:key="e" class="{{['resolution-tab', 'data-v-56980893', res.f && 'active']}}" bindtap="{{res.g}}"><text class="res-value data-v-56980893">{{res.a}}</text><text wx:if="{{res.b}}" class="res-note data-v-56980893">{{res.c}}</text><text wx:if="{{res.d}}" class="res-badge data-v-56980893">推荐</text></view></view></view><view class="style-section data-v-56980893"><text class="style-title data-v-56980893"><text class="title-icon data-v-56980893">⏱️</text> 视频时长 </text><view class="duration-tabs data-v-56980893"><view wx:for="{{ac}}" wx:for-item="dur" wx:key="c" class="{{['duration-tab', 'data-v-56980893', dur.d && 'active']}}" bindtap="{{dur.e}}"><text class="dur-value data-v-56980893">{{dur.a}}</text><text class="dur-desc data-v-56980893">{{dur.b}}</text></view></view></view><view class="advanced-section data-v-56980893"><view class="advanced-header data-v-56980893" bindtap="{{ae}}"><text class="advanced-title data-v-56980893">{{ad}} 高级设置</text></view><view wx:if="{{af}}" class="advanced-content data-v-56980893"><view class="advanced-item data-v-56980893"><view class="advanced-row data-v-56980893"><view class="advanced-info data-v-56980893"><text class="advanced-label data-v-56980893">AI 自动优化提示词</text><text class="advanced-desc data-v-56980893">分析图片风格，自动添加镜头语言</text></view><switch class="data-v-56980893" checked="{{ag}}" bindchange="{{ah}}" color="#F5A623"/></view></view><view class="advanced-item data-v-56980893"><text class="advanced-label data-v-56980893">排除内容</text><text class="advanced-desc data-v-56980893">选择要避免生成的内容类型</text><view class="negative-presets data-v-56980893"><view wx:for="{{ai}}" wx:for-item="preset" wx:key="b" class="{{['negative-chip', 'data-v-56980893', preset.c && 'active']}}" bindtap="{{preset.d}}"><text class="data-v-56980893">{{preset.a}}</text></view></view></view><view class="advanced-item data-v-56980893"><text class="advanced-label data-v-56980893">结束帧图片（可选）</text><text class="advanced-desc data-v-56980893">选择绘本中的一张图片作为结束帧</text><view class="end-frame-selector data-v-56980893"><view class="{{['end-frame-option', 'data-v-56980893', aj && 'active']}}" bindtap="{{ak}}"><text class="end-frame-text data-v-56980893">AI 自然结束</text></view><view wx:for="{{al}}" wx:for-item="page" wx:key="c" class="{{['end-frame-thumb', 'data-v-56980893', page.d && 'active']}}" bindtap="{{page.e}}"><image src="{{page.a}}" mode="aspectFill" class="thumb-image data-v-56980893"/><view wx:if="{{page.b}}" class="end-check data-v-56980893"><text class="data-v-56980893">✓</text></view></view></view></view></view></view><text class="preview-tip data-v-56980893">视频生成需要 1-5 分钟，请耐心等待</text></view><view class="section data-v-56980893" hidden="{{!ay}}"><view class="preview-card data-v-56980893"><view class="preview-header data-v-56980893"><image wx:if="{{an}}" src="{{ao}}" mode="aspectFill" class="preview-image data-v-56980893"/><view wx:else class="preview-placeholder data-v-56980893"><text class="data-v-56980893">🎬</text></view><view class="preview-info data-v-56980893"><text class="preview-title data-v-56980893">独立创作视频</text><text class="preview-meta data-v-56980893">"{{ap}}{{aq}}"</text><text wx:if="{{ar}}" class="preview-meta data-v-56980893">已生成首帧</text><text wx:else class="preview-meta data-v-56980893">AI 将自动生成首帧</text></view></view></view><view class="style-section data-v-56980893"><text class="style-title data-v-56980893"><text class="title-icon data-v-56980893">🎬</text> 场景模板 </text><text class="style-hint data-v-56980893">选择模板自动应用最佳参数</text><view class="template-list data-v-56980893"><view wx:for="{{as}}" wx:for-item="template" wx:key="f" class="{{['template-card', 'data-v-56980893', template.g && 'active', template.h && 'recommended']}}" bindtap="{{template.i}}"><view wx:if="{{template.a}}" class="recommend-badge data-v-56980893">推荐</view><text class="template-icon data-v-56980893">{{template.b}}</text><text class="template-name data-v-56980893">{{template.c}}</text><text class="template-desc data-v-56980893">{{template.d}}</text><view wx:if="{{template.e}}" class="template-check data-v-56980893"><text class="data-v-56980893">✓</text></view></view></view></view><view class="style-section data-v-56980893"><text class="style-title data-v-56980893"><text class="title-icon data-v-56980893">📐</text> 画面比例 </text><view class="aspect-ratio-list data-v-56980893"><view wx:for="{{at}}" wx:for-item="ratio" wx:key="d" class="{{['aspect-ratio-item', 'data-v-56980893', ratio.e && 'active', ratio.f && 'recommended']}}" bindtap="{{ratio.g}}"><view class="ratio-preview data-v-56980893" style="{{'aspect-ratio:' + ratio.a}}"></view><text class="ratio-label data-v-56980893">{{ratio.b}}</text><text wx:if="{{ratio.c}}" class="ratio-badge data-v-56980893">推荐</text></view></view></view><view class="style-section data-v-56980893"><text class="style-title data-v-56980893"><text class="title-icon data-v-56980893">🎭</text> 运动模式 </text><view class="motion-mode-list data-v-56980893"><view wx:for="{{av}}" wx:for-item="mode" wx:key="e" class="{{['motion-mode-item', 'data-v-56980893', mode.f && 'active']}}" bindtap="{{mode.g}}"><view class="mode-info data-v-56980893"><text class="mode-name data-v-56980893">{{mode.a}}</text><text class="mode-desc data-v-56980893">{{mode.b}}</text></view><view wx:if="{{mode.c}}" class="mode-badge data-v-56980893">推荐</view><view wx:if="{{mode.d}}" class="mode-check data-v-56980893"><text class="data-v-56980893">✓</text></view></view></view></view><view class="style-section data-v-56980893"><text class="style-title data-v-56980893"><text class="title-icon data-v-56980893">🎞️</text> 视频分辨率 </text><view class="resolution-tabs data-v-56980893"><view wx:for="{{aw}}" wx:for-item="res" wx:key="e" class="{{['resolution-tab', 'data-v-56980893', res.f && 'active']}}" bindtap="{{res.g}}"><text class="res-value data-v-56980893">{{res.a}}</text><text wx:if="{{res.b}}" class="res-note data-v-56980893">{{res.c}}</text><text wx:if="{{res.d}}" class="res-badge data-v-56980893">推荐</text></view></view></view><view class="style-section data-v-56980893"><text class="style-title data-v-56980893"><text class="title-icon data-v-56980893">⏱️</text> 视频时长 </text><view class="duration-tabs data-v-56980893"><view wx:for="{{ax}}" wx:for-item="dur" wx:key="c" class="{{['duration-tab', 'data-v-56980893', dur.d && 'active']}}" bindtap="{{dur.e}}"><text class="dur-value data-v-56980893">{{dur.a}}</text><text class="dur-desc data-v-56980893">{{dur.b}}</text></view></view></view><text class="preview-tip data-v-56980893">视频生成需要 1-5 分钟，请耐心等待</text></view><view class="bottom-placeholder data-v-56980893"></view></scroll-view><view wx:if="{{az}}" class="bottom-bar data-v-56980893"><view wx:if="{{aA}}" class="step-back-btn data-v-56980893" bindtap="{{aB}}"><text class="data-v-56980893">上一步</text></view><view class="{{['generate-btn', 'data-v-56980893', aD && 'disabled', aE && 'flex-1']}}" bindtap="{{aF}}"><text class="data-v-56980893">{{aC}}</text></view></view><generating-progress wx:if="{{aG}}" class="data-v-56980893" u-i="56980893-1" bind:__l="__l" u-p="{{aH}}"/></view>