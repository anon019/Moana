"use strict";const e=require("../../common/vendor.js"),r=e.defineComponent({__name:"GeneratingProgress",props:{progress:{},type:{default:"book"},stage:{default:""},message:{default:""}},setup(r){const t=r,s=[{id:"story",name:"ç¼–å†™æ•…äº‹"},{id:"image",name:"ç”Ÿæˆæ’ç”»"},{id:"audio",name:"åˆæˆè¯­éŸ³"}],o=[{id:"text",name:"æ–‡æœ¬ç”Ÿæˆ"},{id:"first",name:"é¦–æ›²ç”Ÿæˆ"},{id:"complete",name:"å…¨éƒ¨å®Œæˆ"}],a=[{id:"prepare",name:"å‡†å¤‡ç´ æ"},{id:"render",name:"æ¸²æŸ“åŠ¨ç”»"},{id:"compose",name:"åˆæˆè§†é¢‘"}],n=e.computed(()=>"song"===t.type?o:"video"===t.type?a:s),p=["æ­£åœ¨ä¸ºå®è´ç¼–ç»‡ä¸€ä¸ªæ¸©é¦¨çš„æ•…äº‹...","AI æ­£åœ¨åˆ›ä½œç‹¬ä¸€æ— äºŒçš„æ’ç”»...","æ¯ä¸€é¡µéƒ½å……æ»¡çˆ±ä¸æƒ³è±¡åŠ›...","å³å°†å®Œæˆï¼Œæ•¬è¯·æœŸå¾…...","å¥½æ•…äº‹å€¼å¾—ç­‰å¾…ï½"],g=["æ­£åœ¨ä¸ºå®è´åˆ›ä½œä¸“å±æ­Œè¯...","AI æ­£åœ¨è°±å†™æ¬¢ä¹çš„æ—‹å¾‹...","æ¯ä¸€ä¸ªéŸ³ç¬¦éƒ½å……æ»¡çˆ±æ„...","å³å°†å®Œæˆï¼Œå‡†å¤‡å¼€å”±ï½","å¥½éŸ³ä¹å€¼å¾—ç­‰å¾…ï½"],i=["æ­£åœ¨ä¸ºç»˜æœ¬æ³¨å…¥ç”Ÿå‘½åŠ›...","AI æ­£åœ¨åˆ›ä½œç²¾å½©åŠ¨ç”»...","æ¯ä¸€å¸§éƒ½å……æ»¡ç«¥è¶£...","å³å°†å®Œæˆï¼Œæ•¬è¯·æœŸå¾…...","å¥½è§†é¢‘å€¼å¾—ç­‰å¾…ï½"],u=e.computed(()=>"song"===t.type?g:"video"===t.type?i:p),d=e.computed(()=>"song"===t.type?["âœ¨","ğŸµ","ğŸ¤","ğŸ¶","ğŸŒŸ"]:"video"===t.type?["âœ¨","ğŸ¬","ğŸ¥","ğŸï¸","ğŸŒŸ"]:["âœ¨","ğŸ“š","ğŸ¨","ğŸµ","ğŸŒŸ"]),m=e.ref(0),l=e.ref(0);let c,v;const f={waiting:0,text:1,first:2,complete:3,error:-1},y={init:0,story:0,story_done:1,saving:2,completed:3,error:-1};const _=e.computed(()=>{if(t.stage){if("song"===t.type)return f[t.stage]??0;if("book"===t.type)return(e=t.stage)?e in y?y[e]:e.startsWith("image_")?1:e.startsWith("audio_")?2:0:0}var e;return t.progress<20?0:t.progress<70?1:t.progress<95?2:3}),I={waiting:"æ–‡æœ¬ç”Ÿæˆä¸­",text:"éŸ³ä¹ç”Ÿæˆä¸­",first:"ç»§ç»­ç”Ÿæˆä¸­",complete:"ç”Ÿæˆå®Œæˆ",error:"ç”Ÿæˆå¤±è´¥"},h={init:"å‡†å¤‡ä¸­",story:"æ•…äº‹åˆ›ä½œä¸­",story_done:"æ•…äº‹å®Œæˆ",saving:"ä¿å­˜ä¸­",completed:"ç”Ÿæˆå®Œæˆ",error:"ç”Ÿæˆå¤±è´¥"};const A=e.computed(()=>{if(t.message)return t.message;if(t.stage){if("song"===t.type)return I[t.stage]||"ç”Ÿæˆä¸­";if("book"===t.type)return function(e){if(!e)return"ç”Ÿæˆä¸­";if(e in h)return h[e];const r=e.match(/^image_(\d+)$/);if(r)return`ç¬¬${r[1]}å¼ æ’ç”»`;const t=e.match(/^audio_(\d+)$/);return t?`ç¬¬${t[1]}æ®µè¯­éŸ³`:"ç”Ÿæˆä¸­"}(t.stage)}return"song"===t.type?t.progress<30?"æ­Œè¯åˆ›ä½œä¸­":t.progress<70?"éŸ³ä¹ç”Ÿæˆä¸­":t.progress<95?"å°é¢ç»˜åˆ¶ä¸­":"å³å°†å®Œæˆ":"video"===t.type?t.progress<30?"å‡†å¤‡ç´ æä¸­":t.progress<70?"æ¸²æŸ“åŠ¨ç”»ä¸­":t.progress<95?"åˆæˆè§†é¢‘ä¸­":"å³å°†å®Œæˆ":t.progress<20?"æ•…äº‹åˆ›ä½œä¸­":t.progress<70?"æ’ç”»ç”Ÿæˆä¸­":t.progress<95?"è¯­éŸ³åˆæˆä¸­":"å³å°†å®Œæˆ"}),b=e.computed(()=>"song"===t.type?t.progress<30?"AI æ­£åœ¨ä¸ºå®è´ç¼–å†™ä¸“å±æ­Œè¯":t.progress<70?"æ­£åœ¨è°±å†™æ¬¢ä¹çš„æ—‹å¾‹":t.progress<95?"ä¸ºå„¿æ­Œç»˜åˆ¶ç²¾ç¾å°é¢":"æœ€åçš„æ¶¦è‰²ä¸­":"video"===t.type?t.progress<30?"æ­£åœ¨å¤„ç†ç»˜æœ¬ç´ æ":t.progress<70?"AI æ­£åœ¨ç”Ÿæˆç²¾å½©åŠ¨ç”»":t.progress<95?"æ­£åœ¨åˆæˆæœ€ç»ˆè§†é¢‘":"æœ€åçš„æ¶¦è‰²ä¸­":t.progress<20?"AI æ­£åœ¨ä¸ºå®è´ç¼–å†™ä¸“å±æ•…äº‹":t.progress<70?"æ­£åœ¨ç»˜åˆ¶ç²¾ç¾çš„æ’ç”»":t.progress<95?"ä¸ºæ¯ä¸€é¡µé…ä¸Šæ¸©æŸ”çš„å£°éŸ³":"æœ€åçš„æ¶¦è‰²ä¸­"),x=e.computed(()=>u.value[m.value]),$=e.computed(()=>d.value[l.value]);return e.onMounted(()=>{c=setInterval(()=>{m.value=(m.value+1)%u.value.length},3e3),v=setInterval(()=>{l.value=(l.value+1)%d.value.length},800)}),e.onUnmounted(()=>{clearInterval(c),clearInterval(v)}),(r,t)=>({a:e.t($.value),b:e.t(A.value),c:e.t(b.value),d:r.progress+"%",e:e.t(Math.round(r.progress)),f:e.f(n.value,(r,t,s)=>e.e({a:_.value>t},(_.value,{}),{b:e.t(r.name),c:r.id,d:_.value>=t?1:"",e:_.value>t?1:""})),g:e.t(x.value)})}}),t=e._export_sfc(r,[["__scopeId","data-v-dadda304"]]);wx.createComponent(t);
